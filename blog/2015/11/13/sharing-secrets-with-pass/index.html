  <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="theme-color" content="#515151">

  <meta name="generator" content="Hugo 0.14" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> Sharing secrets with pass &middot; Manuel Ohlendorf </title>

  
  <link href='http://fonts.googleapis.com/css?family=Raleway:300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <link rel="stylesheet" href="http://manuel-ohlendorf.de/css/poole.css">
  <link rel="stylesheet" href="http://manuel-ohlendorf.de//css/syntax.css">
  <link rel="stylesheet" href="http://manuel-ohlendorf.de//css/hyde.css">
  <link rel="stylesheet" href="http://manuel-ohlendorf.de//css/styles.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1937462-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>

  
  <link href="" rel="alternate" type="application/rss+xml" title="Manuel Ohlendorf" />
</head>

  <body class="theme-dark">
    <div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <h1 class="brand"><a href="/">Manuel Ohlendorf</a></h1>
      <p class="lead">
       Things from and about me 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="http://manuel-ohlendorf.de/blog">Blog</a></li>
      
        <li><a href="/cv/"> Curriculum Vitae </a></li>
      
      <li><a href="http://manuel-ohlendorf.de/archive">Archive</a></li>
    </ul>
    <a href="https://twitter.com/mohlendo"><i class="fa fa-twitter-square"></i></a>&nbsp;&nbsp;
    <a href="https://github.com/mohlendo"><i class="fa fa-github-square"></i></a>&nbsp;&nbsp;
    <a href="https://www.xing.com/profile/Manuel_Ohlendorf"><i class="fa fa-xing"></i></a>&nbsp;&nbsp;

    <p class="footnote">&copy; 2015 Manuel Ohlendorf. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
        <h1>Sharing secrets with pass</h1>
        <div class="tags">
          <ul>
            
              <li><a href="/tags/pass">pass</a> </li>
            
              <li><a href="/tags/security">Security</a> </li>
            
          </ul>
        </div>
        <span class="post-date">Fri, Nov 13, 2015 &middot; 3 minute read</span>
          

<p>I don&rsquo;t like password managers. I don&rsquo;t trust them. But when you work in a small team and use a lot of different servers and technologies you sometimes have to securely store and share a secret with them.
There are a lot of password managers out there that can do that but I want a very simple command line tool that just uses standard technologies and, <em>Tata</em>, <a href="http://www.passwordstore.org/">Pass, the standard unix password manager</a> hits the spot.</p>

<p>The documentation is quite good and there are some helpful blogpost on how to setup <code>pass</code>. But what I am missing is how to share the stored and encrypted passwords.</p>

<h3 id="setup:c2d430fd8596cdac46bdaea6a142197e">Setup</h3>

<p>To setup <code>pass</code>, you need a GnuPG key which <code>pass</code> uses to encrypt all your secrets. Run the command and follow the instructions:</p>

<pre><code>$ gpg --gen-key
</code></pre>

<p>You should stick to the defaults recommended by GnuPG. Only for the key length I would choose 4096 bits instead of just 2048 bits because you can and bigger is better :-)</p>

<p>After GnuPG has generated the key it prints the details to the key. One line should look something like:</p>

<pre><code>pub   4096R/11223344 2009-07-17
</code></pre>

<p>You need to remember (copy into clipboard) the 8 character key id of the public key. Here it is <code>11223344</code>.</p>

<p>Now you can initialize your <code>pass</code> password store with it:</p>

<pre><code>$ pass init 11223344
</code></pre>

<p>With <code>pass</code> you can use <code>git</code> to track changes made to the password store and if you have a remote repository, you can also share the store with others. Let&rsquo;s initialize the git repository with <code>pass</code>:</p>

<pre><code>$ pass git init
</code></pre>

<p>And add the remote URL:</p>

<pre><code>$ pass git remote add origin kexec.com:pass-store
</code></pre>

<p>Since <code>pass</code> just uses <code>git</code> you don&rsquo;t have to use <code>pass</code> for managing the repository. You can also just use the bare <code>git</code> command for that. The default path for the password store is <code>~/.password-store/</code>.</p>

<h3 id="sharing:c2d430fd8596cdac46bdaea6a142197e">Sharing</h3>

<p>Now that you have a running <code>pass</code> setup you can share that with others. For decrypting the secrets you have to export and share the public <em>and private</em> GnuPG key that you just created.</p>

<p>Keep in mind that anyone who has access to the key and knows the password of the key is able to decrypt all your passwords.</p>

<pre><code>$ gpg -a --output gpg-secret-key.asc --export-secret-keys 11223344
</code></pre>

<p>If you want to provide a team member access to the password store she needs the exported key in the file <code>gpg-secret-key.asc</code>, access to the <code>git</code> remote repository holding the store and the password of the GnuPG key, of course.</p>

<p>This is what the colleague has to do after installing <code>pass</code>:</p>

<p>Import the key into her GnuPG installation:</p>

<pre><code>$ gpg --import gpg-secret-key.asc
</code></pre>

<p>Increase the trust-level to maximum with the GnuPG editor:</p>

<pre><code>$ gpg --edit-key 11223344
</code></pre>

<p>Now, that you are in the interactive editor you have to enter the following:</p>

<pre><code>gpg&gt; trust
</code></pre>

<p>and type <code>5</code> for ultimate trust, then confirm with <code>y</code> and enter <code>quit</code> to exit.
The final step is to clone the <code>git</code> repository:</p>

<pre><code>$ git clone kexec.com:pass-store ~/.password-store/
</code></pre>

<p>Your colleague is now able to decrypt all passwords and add new ones.</p>

<h3 id="security-considerations:c2d430fd8596cdac46bdaea6a142197e">Security Considerations</h3>

<p>Sharing the <code>pass</code> password store has some security issues that you should be aware of:</p>

<ul>
<li>be careful when giving the public/private GnuPG key and password away. In the wrong hands, everything is lost. You shouldn&rsquo;t use E-Mail for that. A USB-Drive that is securely wiped clear after sharing the key should do the trick.</li>
<li>you should also keep the <code>git</code> repository hidden and secure. Pass uses simple files to store the encrypted passwords and the filenames are clear. An attacker with access to the <code>git</code> repository is able to see the clear names of your encrypted passwords and might drew some dangerous conclusions from that.</li>
</ul>

<p>Please keep that in mind and don&rsquo;t blame me later ;-)</p>

      </div>
      
				<h2>Comments</h2>
				<div id="disqus_thread"></div>
<script type="text/javascript">
     
    var disqus_shortname = 'manuelohlendorf'; 

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
			

    </div>

  </body>
</html>
