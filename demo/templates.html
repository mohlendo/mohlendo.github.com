


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    
  <title>Manuel Ohlendorf</title>
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
<link rel="alternate" type="application/atom+xml" title="Atom 1.0"
href="/blog/feed/atom" />

<link rel='stylesheet' href='/css/pygments_murphy.css' type='text/css' />
<link rel='stylesheet' href='/css/pygments_monokai.css' type='text/css' />
<link rel='stylesheet' href='/css/site.css' type='text/css' />
<link rel='stylesheet' href='/css/jquery.tweet.css' type='text/css' />

<script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="/js/jquery.tweet.js"></script>
<script type="text/javascript" src="/js/googleRSSWidget.js"></script>
<script type="text/javascript" src="/js/site.js"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1937462-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


  </head>
  <body>
    <div id="content">
      
  
<div id="header" onclick="location.href='/';" style="cursor: pointer;">
  <div id="plugbanner"></div>
  <div id="blog_logo"></div>
  <h1><a href="/">
      <span id="blog_name">
        Manuel Ohlendorf
      </span>
    </a>
  </h1>
</div>
<div id="top_bar">
  <div class="ButtonBar">
    <ul>
      <li><a href="/">Home</a></li>
      <!--li><a href="/community">Community</a></li-->
      <li><a href="/blog">Blog</a></li>
    </ul>
  </div>
  <div id="search">    
    <form id="searchform" method="get" action="http://www.google.com/search">
      <input type="hidden" name="ie" value="UTF-8">
      <input type="hidden" name="oe" value="UTF-8">
      <input type="hidden" name="domains" value="www.manuel-ohlendorf.de">
      <input type="hidden" name="sitesearch" value="www.manuel-ohlendorf.de">
      <input name="q" id="q" size="20" value="search in blog..." onfocus="if(this.value==this.defaultValue) this.value='';" type="text">
    </form>
  </div>
</div>


      <div id="main_block">
        <div id="prose_block">
          
<div class="blog_post">
  <span class="post_prose">
    <h1>Templating in Blogofile</h1>
    <p>Templates are at the very heart of Blogofile; they control every aspect of how the blog looks. Blogofile uses the <a href="http://www.makotemplates.org/">Mako templating engine</a> which has a very active community and <a href="http://www.makotemplates.org/docs/">great documentation</a>. Blogofile doesn't try to limit what you can do with your templates, you've got the full power of Mako so go ahead and use it. This page will not attempt to rewrite the Mako documentation, but will instead try to document some typical use cases for templates in Blogofile.</p>
    <h2>A word on Blogofile templates</h2>
    <p>Blogofile makes a distinction between two different types of templates:</p>
    <ul>
      <li>Page templates</li>
      <li>Reusable templates</li>
    </ul>
    <p>A page template is a template somewhere in your directory structure called something like your_page.html.mako, this is considered to be a <em>single page</em> somewhere on your site. For instance <mono>/index.html.mako</mono> is the index page of your site. You would put things that you want to be only on your home page in this file.</p>
    <p>Reusable templates are templates that are in the <mono>/_templates</mono> directory. These templates are reused on multiple pages of your site, they do not correspond to any particular page, but are rather <a href="http://www.makotemplates.org/docs/inheritance.html">inherited</a> or <a href="http://www.makotemplates.org/docs/syntax.html#syntax_tags_include">included</a> inside of other templates.</p>
    <p>For example, this site has a header and a sidebar that appears on every single page of this site. They are included in the <mono>/_templates</mono> directory as <mono>header.mako</mono> and <mono>sidebar.mako</mono>, respectively. These are templates that you would likely <a href="http://www.makotemplates.org/docs/syntax.html#syntax_tags_include">include</a> in other templates. The <mono>/_templates/site.mako</mono> file is the base template for all pages on the entire site, this is a template that you would likely want other templates to <a href="http://www.makotemplates.org/docs/inheritance.html">inherit</a> from.</p>
    <h2>Template Variables</h2>
    <p>Blogofile provides to Mako several objects that become available for you to use in your templates:</p>
      <ul>
        <li><b><i>posts</i></b> - This is a list of all the blog post objects</li>
        <li><b><i>config</i></b> - This is the global blog config object as defined in <mono>/_config.cfg</mono></li>
        <li><b><i>archive_links</i></b> - Metadata for the archive links listed by month</li>
        <li><b><i>all_categories</i></b> - All the categories for the blog posts</li>
        <li><b><i>category_link_names</i></b> - A mapping of Category names to their URL friendly equivalents</li>
      </ul>
    <h2>Example 1: Post Lists</h2>
    <p>A typical thing you might want on a blog is a simple list of posts, if you only wanted this on one page, you could simply write a function inline on a regular page template:</p>
    <pre lang="html+mako">
      <h4>Welcome to my homepage</h4>
      Here's my latest 5 blog posts:
      <ul>
        % for p in bf.config.blog.posts[0:5]:
        <li><a href="${p.permalink}">${p.title}</a></li>
        % endfor
      </ul>
    </pre>
    <p>This gets rendered as something like the following:</p>
    <div style="background-color:#ffffff; border:1px solid;">
      <h4>Welcome to my homepage</h4>
      Here's my latest 5 blog posts:
      <ul>
        <li><a href="http://www.manuel-ohlendorf.de/blog/test.html">Testing Markdown</a></li>
      </ul>
    </div>
    <p>To refine that to show posts on a per category basis you might try the following:</p>
    <pre lang="html+mako">
      <h4>Welcome to my homepage</h4>
      Here's the last 5 posts in each category:
      % for category in bf.all_categories:
       Posts in category : ${category[0]}
       <ul>
         % for p in [p for p in bf.config.blog.posts if category[0] in p.categories][0:5]:
         <li><a href="${p.permalink}">${p.title}</a></li>
         % endfor
       </ul>
      % endfor
      
    </pre>
    <p>This gets rendered as something like the following:</p>
    <div style="background-color:#ffffff; border:1px solid;">
      <h4>Welcome to my homepage</h4>
      Here's the last 5 posts in each category:<br/><br/>
    </div>
    <p>If this is a feature you want to be able to reuse, you can put this in it's own reusable template, eg: <mono>/_templates/category_list.mako</mono></p>
    <pre lang="html+mako">
      
      <%page args="posts, category"/>
      <h2>Posts in category : ${category}</h2>
      <ul>
        % for p in [p for p in bf.posts if category in p.categories]:
        <li><a href="${p.permalink}">${p.title}</a></li>
        % endfor
      </ul>
      
    </pre>
    <p>The above template declares two input arguments: posts and category. You can include this template in other templates, making sure to include those arguments:</p>
    <pre lang="html+mako">
      
      % for category in bf.all_categories:
      <%include file="_templates/category_list.mako" args="category=category[0]" />
      % endfor
    </pre>
    <p>Note that the posts object, even though not explicitly passed in the include arguments, is passed automatically because all templates receive the posts object by default. If you wanted to limit the posts to the first 5 posts, you could put "posts=posts[0:5]" in the include args and it would supercede the regular posts object (which includes all posts).</p>
    <h2>More Examples</h2>
    I can provide more examples here if you request them on <a href="http://groups.google.com/group/blogofile-discuss">the mailing list</a>
  </span>
</div>

        </div><!-- End Prose Block -->
        
  <div class="right_sidebar">
    <div id="right_sidebar">
  <div id="contact">
    <h3>About Me</h3>
    <br/>
    <img src="/site_img/me.jpg"/>
  </div>
  <div id="blog_post_list">
  <h3>Latest blog posts</h3>
  <ul>
    <li><a href="/blog/test.html">Testing Markdown</a></li>
  </ul>
  </div>
  <div id="on_twitter">
    <h3>On Twitter <small>the good, the bad, and the ugly</small></h3>
    <div id="mohlendo_tweets"></div>
    <a href="http://search.twitter.com/search?q=mohlendo" style="float: right">See more tweets</a>
  </div>
  <div id="commits">
    <h3>Latest Commits</h3>
    <div id="commitsRSS">&nbsp;</div>
    <script type="text/javascript" src="http://www.google.com/reader/ui/publisher-en.js"></script>
<script type="text/javascript" src="http://www.google.com/reader/public/javascript/user/05822478891877038698/label/github?n=5&callback=commitsRSSRender"></script>
    <a href="http://github.com/mohlendo/" style="float: right">See more commits</a><br/>
  </div>
  <div id="categories">
    <h3>Categories</h3>
    <ul>
     <li><a href="/blog/category/test">Test</a> (<a href="/blog/category/test/feed">rss</a>) (1)</li>
    </ul>
  </div> 
  <div id="archives">			
    <h3>Archives</h3>
    <ul>
      <li><a href="/blog/archive/2010/12/1" title="December 2010">December 2010</a>&nbsp;(1)</li>
    </ul>
  </div>

</div>

  </div>

      </div><!-- End Main Block -->
      <div id="footer">
        
  <p id="credits">
Powered by <a href="http://www.blogofile.com">Blogofile</a>.<br/>
<br/>
RSS feeds for <a href="/blog/feed">Entries</a>
 and <a
href="http://manuelohlendorf.disqus.com/latest.rss">Comments</a>.
<br>
</p>
<script type="text/javascript">
//<![CDATA[
(function() {
		var links = document.getElementsByTagName('a');
		var query = '?';
		for(var i = 0; i < links.length; i++) {
			if(links[i].href.indexOf('#disqus_thread') >= 0) {
				query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
			}
		}
		document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/manuelohlendorf/get_num_replies.js' + query + '"></' + 'script>');
	})();
//]]>
</script>


      </div> <!-- End Footer -->
    </div> <!-- End Content -->
  </body>
</html>





