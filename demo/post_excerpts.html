


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    
  <title>Manuel Ohlendorf</title>
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
<link rel="alternate" type="application/atom+xml" title="Atom 1.0"
href="/blog/feed/atom" />

<link rel='stylesheet' href='/css/pygments_murphy.css' type='text/css' />
<link rel='stylesheet' href='/css/pygments_monokai.css' type='text/css' />
<link rel='stylesheet' href='/css/site.css' type='text/css' />
<link rel='stylesheet' href='/css/jquery.tweet.css' type='text/css' />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript" src="/js/jquery.tweet.js"></script>
<script type="text/javascript" src="/js/googleRSSWidget.js"></script>
<script type="text/javascript" src="/js/site.js"></script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1937462-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  </head>
  <body>
    <div id="content">
      
  
<div id="header" onclick="location.href='/';" style="cursor: pointer;">
  <div id="plugbanner"></div>
  <div id="blog_logo"></div>
  <h1><a href="/">
      <span id="blog_name">
        Manuel Ohlendorf
      </span>
    </a>
  </h1>
</div>
<div id="top_bar">
  <div class="ButtonBar">
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/cv.html">CV</a></li>
    </ul>
  </div>
  <div id="search">    
    <form id="searchform" method="get" action="http://www.google.com/search">
      <input type="hidden" name="ie" value="UTF-8">
      <input type="hidden" name="oe" value="UTF-8">
      <input type="hidden" name="domains" value="www.manuel-ohlendorf.de">
      <input type="hidden" name="sitesearch" value="www.manuel-ohlendorf.de">
      <input name="q" id="q" size="20" value="search in blog..." onfocus="if(this.value==this.defaultValue) this.value='';" type="text">
    </form>
  </div>
</div>


      <div id="main_block">
        <div id="prose_block">
          
<div class="blog_post">
  <span class="post_prose">
    <h1>Post excerpts</h1>
    <p>The blog on this site shows the full content of posts in chronological order, but many prefer to only show an excerpt of the post in the chronological listing and show the full post only on the permalink page. Here's a demonstration of showing the last 3 posts with only an excerpt showing:</p>
        



<div class="blog_post" id="testing-markdown">
  <a class="blog_post_title" name="Testing Markdown" />
  <h2 class="blog_post_title"><a href="/blog/test.html" rel="bookmark" title="Permanent Link to Testing Markdown">Testing Markdown</a></h2>
  <small>December 22, 2010 at 01:09 PM | categories: 

<a href='/blog/category/test'>Test</a>
 | <a href="http://www.manuel-ohlendorf.de/blog/test.html#disqus_thread">View Comments</a>
  </small>
  <span class="post_prose">
    
  It even works in blogofileThis is a list:     one      two      three...

  </span>
</div>




    <h2>Howto</h2>
    <ol>
      <li>Turn on the <b>post_excerpt_enabled</b> option in your _config.py file, as excerpts are not generated by default.</li>
      <li>Make sure your regular post template looks like this, with the important aspect being the <b>post_prose</b> content being factored out into a mako function. This lets us redefine this function in other templates that inherit from this:
<pre lang="mako">
<%page args="post"/>
<div class="blog_post">
  <a name="${post.title}" />
  <h2 class="blog_post_title">${post.title}</a></h2>
  <span class="post_prose">
    ${self.post_prose(post)}
  </span>
</div>

<%def name="post_prose(post)">
  ${post.content}
</%def>
</pre>

      Note: This version of post.mako is very stripped down, just to show the point at hand. You'll want to use something <a href="http://github.com/EnigmaCurry/blogofile.com/blob/master/_templates/post.mako">a bit more like this</a> on a real blog.<br/><br/>
      </li>
      <li>Create a new reusable template called post_excerpt.mako (these go in /_templates) inheriting from post.mako:
        <br/>
<pre lang="mako">
<%inherit file="post.mako" />
<%def name="post_prose(post)">
  ${post.excerpt}
</%def>
</pre>
        This redefines the post_prose function in the base post.mako template, replacing the content for the excerpt.
        </li>
      <li>Modify <a href="http://github.com/EnigmaCurry/blogofile.com/blob/master/_templates/chronological.mako">chronological.mako</a> to include post_excerpt.mako instead of post.mako, or you can add something like this to any template:</li>

<pre lang="mako">
    % for post in bf.config.blog.posts[:3]:
        <%include file="post_excerpt.mako" args="post=post" />
    % endfor
</pre>

    </ol>
    <br/>
    <h2>Advanced</h2>
    <p>If you don't like the way the excerpts are handled, you can redefine the function that makes the excerpt to do exactly what you want. In your _config.py file just define a new function called post_excerpt:</p>
<pre lang="python">
def post_excerpt(content, num_words):
    #chop up content however you like, return X number of words as a string.
    pass
</pre>
  </span>
</div>

        </div><!-- End Prose Block -->
        
  <div class="right_sidebar">
    <div id="right_sidebar">
  <div id="contact">
    <h3>About Me</h3>
    <br/>
    <img src="/site_img/me.jpg"/>
  </div>
  <div id="blog_post_list">
  <h3>Latest blog posts</h3>
  <ul>
    <li><a href="/blog/test.html">Testing Markdown</a></li>
  </ul>
  </div>
  <div id="on_twitter">
    <h3>On Twitter <small>the good, the bad, and the ugly</small></h3>
    <div id="mohlendo_tweets"></div>
    <a href="http://search.twitter.com/search?q=mohlendo" style="float: right">See more tweets</a>
  </div>
  <div id="commits">
    <h3>Latest Commits</h3>
    <div id="commitsRSS">&nbsp;</div>
    <script type="text/javascript" src="http://www.google.com/reader/ui/publisher-en.js"></script>
<script type="text/javascript" src="http://www.google.com/reader/public/javascript/user/05822478891877038698/label/github?n=5&callback=commitsRSSRender"></script>
    <a href="http://github.com/mohlendo/" style="float: right">See more commits</a><br/>
  </div>
  <div id="categories">
    <h3>Categories</h3>
    <ul>
     <li><a href="/blog/category/test">Test</a> (<a href="/blog/category/test/feed">rss</a>) (1)</li>
    </ul>
  </div> 
  <div id="archives">			
    <h3>Archives</h3>
    <ul>
      <li><a href="/blog/archive/2010/12/1" title="December 2010">December 2010</a>&nbsp;(1)</li>
    </ul>
  </div>

</div>

  </div>

      </div><!-- End Main Block -->
      <div id="footer">
        
  <p id="credits">
Powered by <a href="http://www.blogofile.com">Blogofile</a>.<br/>
<br/>
RSS feeds for <a href="/blog/feed">Entries</a>
 and <a
href="http://manuelohlendorf.disqus.com/latest.rss">Comments</a>.
<br>
</p>
<script type="text/javascript">
//<![CDATA[
(function() {
		var links = document.getElementsByTagName('a');
		var query = '?';
		for(var i = 0; i < links.length; i++) {
			if(links[i].href.indexOf('#disqus_thread') >= 0) {
				query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
			}
		}
		document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/manuelohlendorf/get_num_replies.js' + query + '"></' + 'script>');
	})();
//]]>
</script>


      </div> <!-- End Footer -->
    </div> <!-- End Content -->
  </body>
</html>





